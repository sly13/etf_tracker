# üß™ RevenueCat Sandbox Testing Guide

## üì± **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

### **1. –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã App Store**

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –≤ App Store Connect:

1. –ó–∞–π–¥–∏—Ç–µ –≤ [App Store Connect](https://appstoreconnect.apple.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Users and Access** ‚Üí **Sandbox Testers**
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:
   - **Email:** `test1@example.com`
   - **Password:** `Test123!`
   - **First Name:** `Test`
   - **Last Name:** `User`

### **2. –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –≤ App Store Connect**

–°–æ–∑–¥–∞–π—Ç–µ In-App Purchases –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

#### **–ü–æ–¥–ø–∏—Å–∫–∏:**

- **Product ID:** `premium_monthly_test`
- **Type:** Auto-Renewable Subscription
- **Price:** $0.99 (—Ç–µ—Å—Ç–æ–≤–∞—è —Ü–µ–Ω–∞)
- **Duration:** 1 Month

- **Product ID:** `premium_yearly_test`
- **Type:** Auto-Renewable Subscription
- **Price:** $9.99 (—Ç–µ—Å—Ç–æ–≤–∞—è —Ü–µ–Ω–∞)
- **Duration:** 1 Year

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RevenueCat Dashboard**

#### **–°–æ–∑–¥–∞–Ω–∏–µ Entitlements:**

1. –ó–∞–π–¥–∏—Ç–µ –≤ [RevenueCat Dashboard](https://app.revenuecat.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Entitlements**
3. –°–æ–∑–¥–∞–π—Ç–µ `premium_test`:
   - **Display Name:** Premium Test
   - **Description:** Premium features for testing

#### **–°–æ–∑–¥–∞–Ω–∏–µ Products:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Products**
2. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã:
   - `premium_monthly_test` ‚Üí `premium_test`
   - `premium_yearly_test` ‚Üí `premium_test`

#### **–°–æ–∑–¥–∞–Ω–∏–µ Offerings:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Offerings**
2. –°–æ–∑–¥–∞–π—Ç–µ `test_offering`:
   - **Display Name:** Test Offering
   - **Description:** Test subscription plans

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**

### **1. Debug —Ä–µ–∂–∏–º**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ sandbox –∫–æ–≥–¥–∞:

```dart
// –í main.dart
void main() async {
  await dotenv.load(fileName: ".env");

  // –í debug —Ä–µ–∂–∏–º–µ RevenueCat –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç sandbox
  runApp(const MyApp());
}
```

### **2. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**

#### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–∫—É–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ debug —Ä–µ–∂–∏–º–µ
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Apple Sign-In (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ü—Ä–µ–º–∏—É–º
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É (–Ω–µ –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∞–Ω–∏—è)

#### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–æ–∫**

1. –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –≤—ã–π–¥–∏—Ç–µ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
2. –í–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∫—É–ø–∫–∏"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

#### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏**

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **App Store**
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∞—à Apple ID ‚Üí **–ü–æ–¥–ø–∏—Å–∫–∏**
3. –ù–∞–π–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –ø–æ–¥–ø–∏—Å–∫—É –∏ –æ—Ç–º–µ–Ω–∏—Ç–µ –µ—ë

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ RevenueCat Dashboard**

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Dashboard:

#### **Events:**

- –ü–æ–∫—É–ø–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫
- –û—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫

#### **Customers:**

- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- –°—Ç–∞—Ç—É—Å entitlements

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞**

```env
# RevenueCat API Keys (sandbox)
REVENUECAT_IOS_API_KEY=app42ff7d937d

# Backend Configuration
BACKEND_URL=http://localhost:3000
API_TIMEOUT=30000

# App Configuration
APP_NAME=ETF Tracker Test
APP_VERSION=1.0.0
```

### **2. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ**

```sql
-- –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
INSERT INTO "User" (id, name, email, "appleId", "createdAt", "lastLoginAt")
VALUES ('test_user_1', 'Test User', 'test@example.com', 'test_apple_id', NOW(), NOW());

-- –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
INSERT INTO "Subscription" (id, plan, "expiresAt", "autoRenew", "userId")
VALUES ('test_sub_1', 'premium', NOW() + INTERVAL '1 month', true, 'test_user_1');
```

## üö® **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã**

### **1. Sandbox –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

- –ü–æ–∫—É–ø–∫–∏ –Ω–µ —Å–ø–∏—Å—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏
- –ü–æ–¥–ø–∏—Å–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–ª–µ–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ - 1 –≥–æ–¥

### **2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**

- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- –°–∏–º—É–ª—è—Ç–æ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç In-App Purchases
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã App Store

### **3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

```dart
// –í SubscriptionService
await Purchases.setLogLevel(LogLevel.debug);
```

### **4. –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –£–¥–∞–ª–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏–∑ App Store Connect
2. –û—á–∏—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ RevenueCat Dashboard
3. –°–±—Ä–æ—Å—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ—Å—Ç–æ–≤**

### **1. RevenueCat Dashboard**

- **Events:** –í—Å–µ —Å–æ–±—ã—Ç–∏—è –ø–æ–∫—É–ø–æ–∫
- **Customers:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- **Products:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º

### **2. App Store Connect**

- **Sales and Trends:** –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥–∞–∂–∏
- **Sandbox Testers:** –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### **3. –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

```dart
// –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
print('RevenueCat –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ');
print('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: $userId');
print('–ü–æ–¥–ø–∏—Å–∫–∞ –∫—É–ø–ª–µ–Ω–∞: ${package.identifier}');
```

## üéØ **–ì–æ—Ç–æ–≤–æ –∫ production**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ sandbox:

1. **–°–æ–∑–¥–∞–π—Ç–µ production –ø—Ä–æ–¥—É–∫—Ç—ã** –≤ App Store Connect
2. **–û–±–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á–∏** –Ω–∞ production
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ production entitlements** –≤ RevenueCat
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ production** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
5. **–û–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –≤ App Store

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ sandbox –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ! üéâ
